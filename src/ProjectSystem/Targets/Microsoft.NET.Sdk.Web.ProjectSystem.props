<!--
***********************************************************************************************
Microsoft.NET.Sdk.Web.ProjectSystem.props

WARNING:  DO NOT MODIFY this file unless you are knowledgeable about MSBuild and have
          created a backup copy.  Incorrect changes to this file will make it
          impossible to load or build your projects from the command-line or the IDE.

Copyright (c) .NET Foundation. All rights reserved.
***********************************************************************************************
-->

<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <DefaultItemExcludes  Condition=" '$(DisableWebSdkContent)' == '' ">$(DefaultItemExcludes);**\node_modules\**;node_modules\**</DefaultItemExcludes>
    <DefaultItemExcludes  Condition=" '$(DisableWebSdkContent)' == '' ">$(DefaultItemExcludes);**\jspm_packages\**;jspm_packages\**</DefaultItemExcludes>
    <DefaultItemExcludes  Condition=" '$(DisableWebSdkContent)' == '' ">$(DefaultItemExcludes);**\bower_components\**;bower_components\**</DefaultItemExcludes>
    <DefaultWebContentItemExcludes Condition=" '$(DisableWebSdkContent)' == '' ">$(DefaultWebContentItemExcludes);wwwroot\**</DefaultWebContentItemExcludes>

    <OutputType>Exe</OutputType>
    <DebugSymbols Condition="'$(DebugSymbols)' == ''">true</DebugSymbols>
    <DebugType Condition="'$(DebugType)' == ''">pdbonly</DebugType>
    <GenerateDependencyFile Condition="'$(GenerateDependencyFile)' == ''">true</GenerateDependencyFile>
    <ServerGarbageCollection>true</ServerGarbageCollection>
    <IsPackable Condition="'$(IsPackable)' == ''">false</IsPackable>
    <WarnOnPackingNonPackableProject Condition="'$(WarnOnPackingNonPackableProject)' == '' and '$(IsPackable)' == 'false'">true</WarnOnPackingNonPackableProject>
  </PropertyGroup>

  <ItemGroup Condition=" '$(EnableDefaultItems)' == 'true' And '$(EnableDefaultContentItems)' == 'true' ">
    <!-- Publish everything under wwwroot, all JSON files, all config files and all Razor files -->
    <Content Condition=" '$(DisableWebSdkContent)' == '' " Include="wwwroot\**" CopyToPublishDirectory="PreserveNewest" Exclude="$(DefaultItemExcludes);$(DefaultExcludesInProjectFolder)" />
    <Content Condition=" '$(DisableWebSdkContent)' == '' " Include="**\*.config" CopyToOutputDirectory="PreserveNewest" CopyToPublishDirectory="PreserveNewest" Exclude="$(DefaultItemExcludes);$(DefaultExcludesInProjectFolder);$(DefaultWebContentItemExcludes)" />
    <Content Condition=" '$(DisableWebSdkContent)' == '' " Include="**\*.json" CopyToOutputDirectory="PreserveNewest" CopyToPublishDirectory="PreserveNewest" Exclude="$(DefaultItemExcludes);$(DefaultExcludesInProjectFolder);$(DefaultWebContentItemExcludes)" />

    <!-- Set CopyToPublishDirectory to Never for items under AppDesignerFolder ("Properties", by default) to avoid publishing launchSettings.json -->
    <Content Update="$(AppDesignerFolder)\**" CopyToPublishDirectory="Never" Condition="'$(AppDesignerFolder)' != ''"/>

    <!-- Remove Content items from other item types (in a way that CPS understands) -->
    <None Condition=" '$(DisableWebSdkContent)' == '' " Remove="wwwroot\**" />
    <None Remove="**\*.json;**\*.config" />
    <Compile Condition=" '$(DisableWebSdkContent)' == '' " Remove="wwwroot\**" />
    <EmbeddedResource Condition=" '$(DisableWebSdkContent)' == '' " Remove="wwwroot\**" />

    <!-- Keep track of the default content items for later to distinguish them from newly generated content items -->
    <_ContentIncludedByDefault Condition=" '$(DisableWebSdkContent)' == '' " Include="@(Content)" />

  </ItemGroup>

  <Import Project="$(MSBuildExtensionsPath)\Microsoft\VisualStudio\v$(VisualStudioVersion)\TypeScript\Microsoft.TypeScript.Default.props"
      Condition=" '$(DisableWebSdkContent)' == '' And Exists('$(MSBuildExtensionsPath)\Microsoft\VisualStudio\v$(VisualStudioVersion)\TypeScript\Microsoft.TypeScript.Default.props')"/>

</Project>

